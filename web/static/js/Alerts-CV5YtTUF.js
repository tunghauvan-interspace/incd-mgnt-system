import{d as N,r as c,o as I,c as l,a as t,b as r,e as j,t as n,F as h,f as m,w as A,l as x,n as C,u as f,h as y,g as d,j as a,_ as M}from"./index-DJdMDuAV.js";import{M as S}from"./Modal-DNJJ8fbt.js";const E={class:"alerts"},O={class:"page-header"},V={class:"actions"},$=["disabled"],B={key:0,class:"error-message"},T={class:"alerts-container"},F={class:"card"},R={key:0,class:"loading"},z={key:1,class:"table"},G={key:0},P={key:1},U=["onClick"],q={key:2,class:"no-data"},H={key:0,class:"alert-details"},J={class:"detail-row"},K={class:"detail-row"},Q={class:"detail-row"},W={class:"detail-row"},X={key:0,class:"detail-row"},Y={key:1,class:"detail-row"},Z=["href"],tt={key:2,class:"detail-row"},et={key:3,class:"detail-row"},st={class:"labels-container"},lt={key:4,class:"detail-row"},at={class:"annotations-container"},nt={class:"annotation-value"},ot=N({__name:"Alerts",setup(rt){const v=c([]),u=c(!0),_=c(null),s=c(null),b=c(!1),k=async()=>{try{u.value=!0,_.value=null,v.value=await x.getAlerts(),v.value.sort((i,e)=>new Date(e.created_at).getTime()-new Date(i.created_at).getTime())}catch(i){_.value="Error loading alerts",console.error("Error loading alerts:",i)}finally{u.value=!1}},D=()=>{k()},L=i=>{s.value=i,b.value=!0},p=()=>{b.value=!1,s.value=null};return I(()=>{k()}),(i,e)=>{var w;return a(),l("div",E,[t("div",O,[e[0]||(e[0]=t("h2",null,"Alerts",-1)),t("div",V,[t("button",{onClick:D,class:"btn btn-primary",disabled:u.value},n(u.value?"Loading...":"Refresh"),9,$)])]),_.value?(a(),l("div",B,n(_.value),1)):r("",!0),t("div",T,[t("div",F,[u.value?(a(),l("div",R," Loading alerts... ")):v.value.length>0?(a(),l("table",z,[e[1]||(e[1]=t("thead",null,[t("tr",null,[t("th",null,"Alert Name"),t("th",null,"Status"),t("th",null,"Started"),t("th",null,"Incident"),t("th",null,"Actions")])],-1)),t("tbody",null,[(a(!0),l(h,null,m(v.value,o=>(a(),l("tr",{key:o.id},[t("td",null,n(o.alert_name),1),t("td",null,[t("span",{class:C(`status-badge status-${o.status.toLowerCase()}`)},n(o.status),3)]),t("td",null,n(f(y)(o.starts_at)),1),t("td",null,[o.incident_id?(a(),l("span",G,n(o.incident_id.substring(0,8)),1)):(a(),l("span",P,"-"))]),t("td",null,[t("button",{class:"btn btn-primary",onClick:g=>L(o)}," Details ",8,U)])]))),128))])])):(a(),l("div",q," No alerts found "))])]),j(S,{show:b.value,title:`Alert Details - ${((w=s.value)==null?void 0:w.alert_name)||""}`,onClose:p},{footer:A(()=>[t("button",{class:"btn btn-secondary",onClick:p}," Close ")]),default:A(()=>[s.value?(a(),l("div",H,[t("div",J,[e[2]||(e[2]=t("strong",null,"ID:",-1)),d(" "+n(s.value.id),1)]),t("div",K,[e[3]||(e[3]=t("strong",null,"Alert Name:",-1)),d(" "+n(s.value.alert_name),1)]),t("div",Q,[e[4]||(e[4]=t("strong",null,"Status:",-1)),t("span",{class:C(`status-badge status-${s.value.status.toLowerCase()}`)},n(s.value.status),3)]),t("div",W,[e[5]||(e[5]=t("strong",null,"Started:",-1)),d(" "+n(f(y)(s.value.starts_at)),1)]),s.value.ends_at?(a(),l("div",X,[e[6]||(e[6]=t("strong",null,"Ended:",-1)),d(" "+n(f(y)(s.value.ends_at)),1)])):r("",!0),s.value.generator_url?(a(),l("div",Y,[e[7]||(e[7]=t("strong",null,"Generator URL:",-1)),t("a",{href:s.value.generator_url,target:"_blank",rel:"noopener noreferrer"},n(s.value.generator_url),9,Z)])):r("",!0),s.value.incident_id?(a(),l("div",tt,[e[8]||(e[8]=t("strong",null,"Incident ID:",-1)),d(" "+n(s.value.incident_id),1)])):r("",!0),s.value.labels&&Object.keys(s.value.labels).length>0?(a(),l("div",et,[e[9]||(e[9]=t("strong",null,"Labels:",-1)),t("div",st,[(a(!0),l(h,null,m(Object.entries(s.value.labels),([o,g])=>(a(),l("span",{key:o,class:"label-tag"},[t("strong",null,n(o)+":",1),d(" "+n(g),1)]))),128))])])):r("",!0),s.value.annotations&&Object.keys(s.value.annotations).length>0?(a(),l("div",lt,[e[10]||(e[10]=t("strong",null,"Annotations:",-1)),t("div",at,[(a(!0),l(h,null,m(Object.entries(s.value.annotations),([o,g])=>(a(),l("div",{key:o,class:"annotation-item"},[t("strong",null,n(o)+":",1),t("div",nt,n(g),1)]))),128))])])):r("",!0)])):r("",!0)]),_:1},8,["show","title"])])}}}),ut=M(ot,[["__scopeId","data-v-2759bb29"]]);export{ut as default};
