import{a as S,b as $,f as D}from"./index-DjN3g3Gp.js";import{a as m,c as u,e as o,n as x,f as e,t as l,m as a,r as F,o as N,j as v,F as B,i as V,h as _,k as I}from"./vendor-BE7CAo2j.js";const L={class:"flex items-center"},j={class:"flex-shrink-0"},M={class:"text-2xl"},T={class:"ml-4"},z={class:"text-sm font-medium text-gray-600"},E={class:"text-2xl font-bold text-gray-900"},b=m({__name:"StatCard",props:{title:{},value:{},icon:{},color:{default:"blue"}},setup(c){const n=c,i=u(()=>S(n.value)),g=y=>{const d={blue:"border-blue-200 bg-blue-50",red:"border-red-200 bg-red-50",green:"border-green-200 bg-green-50",orange:"border-orange-200 bg-orange-50",gray:"border-gray-200 bg-gray-50"};return d[y]||d.blue};return(y,d)=>(a(),o("div",{class:x(["card",g(c.color)])},[e("div",L,[e("div",j,[e("span",M,l(c.icon),1)]),e("div",T,[e("p",z,l(c.title),1),e("p",E,l(i.value),1)])])],2))}}),R={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},q={class:"card"},G={key:0,class:"text-center py-8"},H={key:1,class:"text-center py-8"},J={key:2,class:"space-y-4"},K={class:"flex justify-between items-start"},O={class:"flex-1"},P={class:"flex items-center space-x-3 mb-2"},Q={class:"text-lg font-medium text-gray-900"},U={class:"text-gray-600 mb-2"},W={class:"flex items-center text-sm text-gray-500 space-x-4"},X={key:0},Y={key:1},Z={key:0,class:"flex space-x-2"},ee=["onClick"],te=["onClick"],oe=m({__name:"index",setup(c){const n=$(),i=F(!1),g=u(()=>n.alerts),y=u(()=>n.firingAlerts),d=u(()=>n.criticalAlerts),f=u(()=>{const r=new Date().toDateString();return n.resolvedAlerts.filter(t=>t.endsAt&&new Date(t.endsAt).toDateString()===r).length}),p=r=>({critical:"status-critical",high:"status-high",medium:"status-medium",low:"status-low"})[r]||"bg-gray-100 text-gray-800",h=r=>({firing:"bg-red-100 text-red-800",resolved:"bg-green-100 text-green-800",silenced:"bg-gray-100 text-gray-800"})[r]||"bg-gray-100 text-gray-800",k=r=>({firing:"border-red-200 bg-red-50",resolved:"border-green-200",silenced:"border-gray-200"})[r]||"border-gray-200",A=async r=>{try{await n.acknowledgeAlert(r)}catch(t){console.error("Failed to acknowledge alert:",t)}},w=async r=>{try{await n.silenceAlert(r,60)}catch(t){console.error("Failed to silence alert:",t)}};return N(async()=>{i.value=!0;try{await n.fetchAlerts()}finally{i.value=!1}}),(r,t)=>(a(),o("div",null,[t[2]||(t[2]=e("div",{class:"mb-6"},[e("h1",{class:"text-2xl font-bold text-gray-900"},"Alerts"),e("p",{class:"text-gray-600"},"Monitor and manage active alerts")],-1)),e("div",R,[v(b,{title:"Firing Alerts",value:y.value.length,icon:"🔥",color:"red"},null,8,["value"]),v(b,{title:"Critical Alerts",value:d.value.length,icon:"⚠️",color:"orange"},null,8,["value"]),v(b,{title:"Resolved Today",value:f.value,icon:"✅",color:"green"},null,8,["value"])]),e("div",q,[i.value?(a(),o("div",G,[...t[0]||(t[0]=[e("p",{class:"text-gray-500"},"Loading alerts...",-1)])])):g.value.length===0?(a(),o("div",H,[...t[1]||(t[1]=[e("p",{class:"text-gray-500"},"No alerts found",-1)])])):(a(),o("div",J,[(a(!0),o(B,null,V(g.value,s=>(a(),o("div",{key:s.id,class:x(["p-4 border border-gray-200 rounded-lg",k(s.status)])},[e("div",K,[e("div",O,[e("div",P,[e("h3",Q,l(s.summary),1),e("span",{class:x([p(s.severity),"px-2 py-1 text-xs rounded-full"])},l(s.severity),3),e("span",{class:x([h(s.status),"px-2 py-1 text-xs rounded-full"])},l(s.status),3)]),e("p",U,l(s.description),1),e("div",W,[e("span",null,"Started: "+l(I(D)(s.startsAt)),1),s.source?(a(),o("span",X,"Source: "+l(s.source),1)):_("",!0),s.incidentId?(a(),o("span",Y,"Incident: "+l(s.incidentId),1)):_("",!0)])]),s.status==="firing"?(a(),o("div",Z,[e("button",{onClick:C=>A(s.id),class:"px-3 py-1 text-sm bg-blue-100 text-blue-700 rounded hover:bg-blue-200"}," Acknowledge ",8,ee),e("button",{onClick:C=>w(s.id),class:"px-3 py-1 text-sm bg-yellow-100 text-yellow-700 rounded hover:bg-yellow-200"}," Silence ",8,te)])):_("",!0)])],2))),128))]))])]))}});export{oe as default};
