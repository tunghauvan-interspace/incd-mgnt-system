import{a as w,r as C,c as _,s as S,k as F,b as o,g as e,v as i,x as u,y as c,z as I,u as p,F as L,f as V,o as r,t as n,n as v,h as A}from"./vendor-DnSe1gxY.js";import{u as M,f as N}from"./index-CSMtF1-0.js";const B={class:"card mb-6"},D={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},U={class:"card"},$={key:0,class:"text-center py-8"},j={key:1,class:"text-center py-8"},z={key:2,class:"space-y-4"},E=["onClick"],H={class:"flex justify-between items-start"},O={class:"flex-1"},R={class:"flex items-center space-x-3 mb-2"},T={class:"text-lg font-medium text-gray-900"},q={class:"text-gray-600 mb-2"},G={class:"flex items-center text-sm text-gray-500 space-x-4"},J={key:0},X=w({__name:"index",setup(K){const{incidents:g,fetchIncidents:m,isLoading:y,setFilters:x,clearFilters:b}=M(),a=C({status:"",severity:"",search:""}),d=_(()=>g.value.filter(l=>!(a.value.status&&l.status!==a.value.status||a.value.severity&&l.severity!==a.value.severity||a.value.search&&!l.title.toLowerCase().includes(a.value.search.toLowerCase())))),f=l=>({critical:"status-critical",high:"status-high",medium:"status-medium",low:"status-low"})[l]||"bg-gray-100 text-gray-800",h=l=>({open:"bg-red-100 text-red-800",acknowledged:"bg-yellow-100 text-yellow-800",investigating:"bg-blue-100 text-blue-800",resolved:"bg-green-100 text-green-800",closed:"bg-gray-100 text-gray-800"})[l]||"bg-gray-100 text-gray-800",k=()=>{a.value={status:"",severity:"",search:""},b()};return S(a,l=>{x(l)},{deep:!0}),F(()=>{m()}),(l,t)=>(r(),o("div",null,[t[10]||(t[10]=e("div",{class:"mb-6 flex justify-between items-center"},[e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Incidents"),e("p",{class:"text-gray-600"},"Manage and track incident responses")]),e("button",{class:"btn btn-primary"}," Create Incident ")],-1)),e("div",B,[e("div",D,[e("div",null,[t[4]||(t[4]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),i(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>a.value.status=s),class:"w-full p-2 border border-gray-300 rounded-md"},[...t[3]||(t[3]=[c('<option value="">All Statuses</option><option value="open">Open</option><option value="acknowledged">Acknowledged</option><option value="investigating">Investigating</option><option value="resolved">Resolved</option><option value="closed">Closed</option>',6)])],512),[[u,a.value.status]])]),e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Severity",-1)),i(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>a.value.severity=s),class:"w-full p-2 border border-gray-300 rounded-md"},[...t[5]||(t[5]=[c('<option value="">All Severities</option><option value="critical">Critical</option><option value="high">High</option><option value="medium">Medium</option><option value="low">Low</option>',5)])],512),[[u,a.value.severity]])]),e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Search",-1)),i(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>a.value.search=s),type:"text",placeholder:"Search incidents...",class:"w-full p-2 border border-gray-300 rounded-md"},null,512),[[I,a.value.search]])]),e("div",{class:"flex items-end"},[e("button",{onClick:k,class:"btn text-gray-600 border border-gray-300"}," Clear Filters ")])])]),e("div",U,[p(y)?(r(),o("div",$,[...t[8]||(t[8]=[e("p",{class:"text-gray-500"},"Loading incidents...",-1)])])):d.value.length===0?(r(),o("div",j,[...t[9]||(t[9]=[e("p",{class:"text-gray-500"},"No incidents found",-1)])])):(r(),o("div",z,[(r(!0),o(L,null,V(d.value,s=>(r(),o("div",{key:s.id,class:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",onClick:P=>l.$router.push(`/incidents/${s.id}`)},[e("div",H,[e("div",O,[e("div",R,[e("h3",T,n(s.title),1),e("span",{class:v([f(s.severity),"px-2 py-1 text-xs rounded-full"])},n(s.severity),3),e("span",{class:v([h(s.status),"px-2 py-1 text-xs rounded-full"])},n(s.status),3)]),e("p",q,n(s.description),1),e("div",G,[e("span",null,"Created: "+n(p(N)(s.createdAt)),1),s.assignee?(r(),o("span",J,"Assigned to: "+n(s.assignee.name),1)):A("",!0),e("span",null,n(s.alertCount)+" alerts",1)])])])],8,E))),128))]))])]))}});export{X as default};
