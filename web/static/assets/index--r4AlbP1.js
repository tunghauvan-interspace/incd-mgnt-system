import{a as w,_ as d,f as C}from"./index-CSMtF1-0.js";import{a as S,r as D,c,k as F,b as o,g as e,e as u,F as B,f as N,o as a,n as g,h as y,t as l,u as I}from"./vendor-DnSe1gxY.js";const L={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},V={class:"card"},$={key:0,class:"text-center py-8"},M={key:1,class:"text-center py-8"},T={key:2,class:"space-y-4"},j={class:"flex justify-between items-start"},z={class:"flex-1"},E={class:"flex items-center space-x-3 mb-2"},R={class:"text-lg font-medium text-gray-900"},q={class:"text-gray-600 mb-2"},G={class:"flex items-center text-sm text-gray-500 space-x-4"},H={key:0},J={key:1},K={key:0,class:"flex space-x-2"},O=["onClick"],P=["onClick"],X=S({__name:"index",setup(Q){const n=w(),i=D(!1),x=c(()=>n.alerts),v=c(()=>n.firingAlerts),_=c(()=>n.criticalAlerts),p=c(()=>{const r=new Date().toDateString();return n.resolvedAlerts.filter(t=>t.endsAt&&new Date(t.endsAt).toDateString()===r).length}),m=r=>({critical:"status-critical",high:"status-high",medium:"status-medium",low:"status-low"})[r]||"bg-gray-100 text-gray-800",f=r=>({firing:"bg-red-100 text-red-800",resolved:"bg-green-100 text-green-800",silenced:"bg-gray-100 text-gray-800"})[r]||"bg-gray-100 text-gray-800",b=r=>({firing:"border-red-200 bg-red-50",resolved:"border-green-200",silenced:"border-gray-200"})[r]||"border-gray-200",h=async r=>{try{await n.acknowledgeAlert(r)}catch(t){console.error("Failed to acknowledge alert:",t)}},A=async r=>{try{await n.silenceAlert(r,60)}catch(t){console.error("Failed to silence alert:",t)}};return F(async()=>{i.value=!0;try{await n.fetchAlerts()}finally{i.value=!1}}),(r,t)=>(a(),o("div",null,[t[2]||(t[2]=e("div",{class:"mb-6"},[e("h1",{class:"text-2xl font-bold text-gray-900"},"Alerts"),e("p",{class:"text-gray-600"},"Monitor and manage active alerts")],-1)),e("div",L,[u(d,{title:"Firing Alerts",value:v.value.length,icon:"🔥",color:"red"},null,8,["value"]),u(d,{title:"Critical Alerts",value:_.value.length,icon:"⚠️",color:"orange"},null,8,["value"]),u(d,{title:"Resolved Today",value:p.value,icon:"✅",color:"green"},null,8,["value"])]),e("div",V,[i.value?(a(),o("div",$,[...t[0]||(t[0]=[e("p",{class:"text-gray-500"},"Loading alerts...",-1)])])):x.value.length===0?(a(),o("div",M,[...t[1]||(t[1]=[e("p",{class:"text-gray-500"},"No alerts found",-1)])])):(a(),o("div",T,[(a(!0),o(B,null,N(x.value,s=>(a(),o("div",{key:s.id,class:g(["p-4 border border-gray-200 rounded-lg",b(s.status)])},[e("div",j,[e("div",z,[e("div",E,[e("h3",R,l(s.summary),1),e("span",{class:g([m(s.severity),"px-2 py-1 text-xs rounded-full"])},l(s.severity),3),e("span",{class:g([f(s.status),"px-2 py-1 text-xs rounded-full"])},l(s.status),3)]),e("p",q,l(s.description),1),e("div",G,[e("span",null,"Started: "+l(I(C)(s.startsAt)),1),s.source?(a(),o("span",H,"Source: "+l(s.source),1)):y("",!0),s.incidentId?(a(),o("span",J,"Incident: "+l(s.incidentId),1)):y("",!0)])]),s.status==="firing"?(a(),o("div",K,[e("button",{onClick:k=>h(s.id),class:"px-3 py-1 text-sm bg-blue-100 text-blue-700 rounded hover:bg-blue-200"}," Acknowledge ",8,O),e("button",{onClick:k=>A(s.id),class:"px-3 py-1 text-sm bg-yellow-100 text-yellow-700 rounded hover:bg-yellow-200"}," Silence ",8,P)])):y("",!0)])],2))),128))]))])]))}});export{X as default};
