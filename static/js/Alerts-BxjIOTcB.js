import{a,f as l,_ as e}from"./index-CGWH-pHj.js";import{M as t}from"./Modal-Bzr7RJEW.js";import{d as s,r as n,o as r,e as u,f as i,g as o,j as d,p as v,M as c,N as g,m as b,k as y,u as k,y as _,x as m}from"./vendor-B0DAOtER.js";import"./utils-ei4kQ0Q2.js";import"./charts-BZyKnHge.js";const h={class:"alerts"},p={class:"page-header"},w={class:"actions"},f=["disabled"],j={key:0,class:"error-message"},A={class:"alerts-container"},C={class:"card"},D={key:0,class:"loading"},L={key:1,class:"table"},I={key:0},N={key:1},O=["onClick"],S={key:2,class:"no-data"},x={key:0,class:"alert-details"},M={class:"detail-row"},$={class:"detail-row"},E={class:"detail-row"},R={class:"detail-row"},T={key:0,class:"detail-row"},G={key:1,class:"detail-row"},U=["href"],q={key:2,class:"detail-row"},z={key:3,class:"detail-row"},B={class:"labels-container"},F={key:4,class:"detail-row"},H={class:"annotations-container"},J={class:"annotation-value"},K=e(s({__name:"Alerts",setup(e){const s=n([]),K=n(!0),P=n(null),Q=n(null),V=n(!1),W=async()=>{try{K.value=!0,P.value=null,s.value=await a.getAlerts(),s.value.sort((a,l)=>new Date(l.created_at).getTime()-new Date(a.created_at).getTime())}catch(l){P.value="Error loading alerts"}finally{K.value=!1}},X=()=>{W()},Y=()=>{V.value=!1,Q.value=null};return r(()=>{W()}),(a,e)=>{var n;return m(),u("div",h,[i("div",p,[e[0]||(e[0]=i("h2",null,"Alerts",-1)),i("div",w,[i("button",{onClick:X,class:"btn btn-primary",disabled:K.value},v(K.value?"Loading...":"Refresh"),9,f)])]),P.value?(m(),u("div",j,v(P.value),1)):o("",!0),i("div",A,[i("div",C,[K.value?(m(),u("div",D,"Loading alerts...")):s.value.length>0?(m(),u("table",L,[e[1]||(e[1]=i("thead",null,[i("tr",null,[i("th",null,"Alert Name"),i("th",null,"Status"),i("th",null,"Started"),i("th",null,"Incident"),i("th",null,"Actions")])],-1)),i("tbody",null,[(m(!0),u(c,null,g(s.value,a=>(m(),u("tr",{key:a.id},[i("td",null,v(a.alert_name),1),i("td",null,[i("span",{class:y(`status-badge status-${a.status.toLowerCase()}`)},v(a.status),3)]),i("td",null,v(k(l)(a.starts_at)),1),i("td",null,[a.incident_id?(m(),u("span",I,v(a.incident_id.substring(0,8)),1)):(m(),u("span",N,"-"))]),i("td",null,[i("button",{class:"btn btn-primary",onClick:l=>(a=>{Q.value=a,V.value=!0})(a)},"Details",8,O)])]))),128))])])):(m(),u("div",S,"No alerts found"))])]),d(t,{show:V.value,title:`Alert Details - ${(null==(n=Q.value)?void 0:n.alert_name)||""}`,onClose:Y},{footer:b(()=>[i("button",{class:"btn btn-secondary",onClick:Y},"Close")]),default:b(()=>[Q.value?(m(),u("div",x,[i("div",M,[e[2]||(e[2]=i("strong",null,"ID:",-1)),_(" "+v(Q.value.id),1)]),i("div",$,[e[3]||(e[3]=i("strong",null,"Alert Name:",-1)),_(" "+v(Q.value.alert_name),1)]),i("div",E,[e[4]||(e[4]=i("strong",null,"Status:",-1)),i("span",{class:y(`status-badge status-${Q.value.status.toLowerCase()}`)},v(Q.value.status),3)]),i("div",R,[e[5]||(e[5]=i("strong",null,"Started:",-1)),_(" "+v(k(l)(Q.value.starts_at)),1)]),Q.value.ends_at?(m(),u("div",T,[e[6]||(e[6]=i("strong",null,"Ended:",-1)),_(" "+v(k(l)(Q.value.ends_at)),1)])):o("",!0),Q.value.generator_url?(m(),u("div",G,[e[7]||(e[7]=i("strong",null,"Generator URL:",-1)),i("a",{href:Q.value.generator_url,target:"_blank",rel:"noopener noreferrer"},v(Q.value.generator_url),9,U)])):o("",!0),Q.value.incident_id?(m(),u("div",q,[e[8]||(e[8]=i("strong",null,"Incident ID:",-1)),_(" "+v(Q.value.incident_id),1)])):o("",!0),Q.value.labels&&Object.keys(Q.value.labels).length>0?(m(),u("div",z,[e[9]||(e[9]=i("strong",null,"Labels:",-1)),i("div",B,[(m(!0),u(c,null,g(Object.entries(Q.value.labels),([a,l])=>(m(),u("span",{key:a,class:"label-tag"},[i("strong",null,v(a)+":",1),_(" "+v(l),1)]))),128))])])):o("",!0),Q.value.annotations&&Object.keys(Q.value.annotations).length>0?(m(),u("div",F,[e[10]||(e[10]=i("strong",null,"Annotations:",-1)),i("div",H,[(m(!0),u(c,null,g(Object.entries(Q.value.annotations),([a,l])=>(m(),u("div",{key:a,class:"annotation-item"},[i("strong",null,v(a)+":",1),i("div",J,v(l),1)]))),128))])])):o("",!0)])):o("",!0)]),_:1},8,["show","title"])])}}}),[["__scopeId","data-v-1c0dab73"]]);export{K as default};
